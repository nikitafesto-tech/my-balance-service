{% extends "layouts/base.html" %}

{% block title %}Neirosetim AI{% endblock %}

{% block head_scripts %}
    {# --- Библиотеки, нужные только внутри приложения (Чат) --- #}
    
    {# 1. Markdown парсер #}
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    {# 2. Подсветка синтаксиса кода #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    {# 3. KaTeX для математических формул #}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
{% endblock %}

{% block content %}
<div x-data="{ sidebarOpen: false }" class="flex h-screen w-full overflow-hidden bg-bg">
    
    {# --- ЛЕВАЯ КОЛОНКА: Сайдбар --- #}
    {% include "components/_sidebar.html" %}

    {# --- ПРАВАЯ КОЛОНКА: Основной контент --- #}
    <div class="flex-1 flex flex-col min-w-0 relative h-full">
        
        {# Шапка (видна только на мобильных) #}
        {% include "components/_header.html" %}

        {# Область контента страницы #}
        <main class="flex-1 relative overflow-hidden flex flex-col">
            {% block app_content %}{% endblock %}
        </main>
        
    </div>

    {# --- Overlay для мобильных устройств --- #}
    <div x-show="sidebarOpen" 
         @click="sidebarOpen = false"
         x-transition:enter="transition-opacity ease-linear duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition-opacity ease-linear duration-300"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 z-30 bg-black/50 md:hidden backdrop-blur-sm"
         x-cloak>
    </div>

</div>
{% endblock %}